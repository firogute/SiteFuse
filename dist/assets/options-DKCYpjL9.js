import{r as s,c as E,R as S,j as e,m as C}from"./client-Bonc8G4M.js";import{g as o,F as O,s as d}from"./Cog6ToothIcon-W4e9sv2A.js";function R({title:n,titleId:l,...i},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),n?s.createElement("title",{id:l},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"}))}const D=s.forwardRef(R);function A({title:n,titleId:l,...i},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},i),n?s.createElement("title",{id:l},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const B=s.forwardRef(A);function I(){const[n,l]=s.useState({}),[i,r]=s.useState({}),[x,w]=s.useState({}),[p,h]=s.useState(""),[g,j]=s.useState("");s.useEffect(()=>{(async()=>{const t=await o(["limits","blocked","usage"]);l(t.limits||{}),r(t.blocked||{}),w(t.usage||{});const c=await o(["debug"]);b(!!c.debug)})()},[]);const[m,b]=s.useState(!1);async function k(){const t=!m;await d({debug:t}),b(t)}function f(t){if(!t)return"0m 0s";const c=Math.floor(t/60),a=t%60;return`${c}m ${a}s`}async function v(){const t=p.trim(),c=parseInt(g,10);if(!t||isNaN(c))return;const u=(await o(["limits"])).limits||{};u[t]=c,await d({limits:u}),l(u),h(""),j("")}async function L(t){const a=(await o(["limits"])).limits||{};delete a[t],await d({limits:a}),l(a)}async function y(t){const a=(await o(["blocked"])).blocked||{};a[t]?delete a[t]:a[t]=!0,await d({blocked:a}),r(a)}return e.jsx("div",{className:"p-6 w-full font-sans",children:e.jsxs(C.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"SiteFuse — Domains"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage tracked domains and limits"})]})}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 gap-3 items-center",children:[e.jsx("input",{className:"col-span-2 p-2 rounded border",placeholder:"domain.com",value:p,onChange:t=>h(t.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 p-2 rounded border",placeholder:"minutes",value:g,onChange:t=>j(t.target.value)}),e.jsx("button",{className:"px-3 py-2 rounded bg-primary text-white",onClick:v,children:"Add"})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:e.jsxs("button",{onClick:k,className:`px-3 py-2 rounded ${m?"bg-yellow-500 text-white":"border text-gray-700"}`,children:[e.jsx(D,{className:"w-5 h-5 inline-block mr-2"})," Debug: ",m?"On":"Off"]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm text-gray-500",children:[e.jsx("th",{className:"py-2",children:"Domain"}),e.jsx("th",{className:"py-2",children:"Usage"}),e.jsx("th",{className:"py-2",children:"Limit"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[Object.keys(n||{}).length===0&&Object.keys(i||{}).length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-4",colSpan:"4",children:"No domains configured yet."})}),Object.keys(n).map((t,c)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 align-top",children:t}),e.jsx("td",{className:"py-2 align-top",children:f(x[t])}),e.jsxs("td",{className:"py-2 align-top",children:[n[t]," min"]}),e.jsxs("td",{className:"py-2 align-top",children:[e.jsxs("button",{className:"mr-2 px-2 py-1 rounded border flex items-center gap-2",onClick:()=>L(t),children:[e.jsx(B,{className:"w-4 h-4"}),"Delete"]}),e.jsxs("button",{className:"px-2 py-1 rounded bg-red-600 text-white flex items-center gap-2",onClick:()=>y(t),children:[e.jsx(O,{className:"w-4 h-4"}),"Toggle"]})]})]},t)),Object.keys(i).map(t=>!n[t]&&e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:t}),e.jsx("td",{className:"py-2",children:f(x[t])}),e.jsx("td",{className:"py-2",children:"—"}),e.jsx("td",{className:"py-2",children:e.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white",onClick:()=>y(t),children:"Unblock"})})]},`b-${t}`))]})]})})]})})}const N=document.getElementById("root");N&&E(N).render(S.createElement(I));
