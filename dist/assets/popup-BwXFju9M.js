import{r as t,c as k,R as S,j as e,m as o}from"./client-Bonc8G4M.js";import{g as f,F as p,s as E}from"./Cog6ToothIcon-W4e9sv2A.js";function L({title:s,titleId:i,...r},c){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":i},r),s?t.createElement("title",{id:i},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const R=t.forwardRef(L);function H(s){const i=Math.floor(s/60),r=s%60;return`${i}m ${r}s`}function C(){const[s,i]=t.useState(null),[r,c]=t.useState(0),[x,u]=t.useState(null),[w,d]=t.useState(!1),[h,g]=t.useState("");t.useEffect(()=>{(async()=>{const m=(await new Promise(y=>chrome.tabs.query({active:!0,lastFocusedWindow:!0},y)))[0],n=m?new URL(m.url).hostname:null;i(n);const l=await f(["usage","limits","blocked"]);c(l.usage&&l.usage[n]||0),u(l.limits&&l.limits[n]||null),d(l.blocked&&l.blocked[n]||!1)})()},[]);async function j(){if(!s)return;const a=parseInt(h,10);if(isNaN(a)||a<=0)return;const n=(await f(["limits"])).limits||{};n[s]=a,await E({limits:n}),u(a),g("")}function v(){chrome.runtime.sendMessage({action:"block-now",domain:s},()=>{d(!0)})}function N(){chrome.runtime.sendMessage({action:"unblock",domain:s},()=>{d(!1)})}return e.jsx("div",{className:"w-96 p-4 font-sans",children:e.jsxs(o.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"SiteFuse"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Usage dashboard"})]}),e.jsx("div",{className:"text-right text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(p,{className:"w-5 h-5 text-gray-400"}),e.jsx("div",{children:s||"â€”"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs(o.div,{whileHover:{scale:1.02},className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Usage"}),e.jsx("div",{className:"text-lg font-semibold",children:H(r)})]}),e.jsxs(o.div,{whileHover:{scale:1.02},className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Limit"}),e.jsx("div",{className:"text-lg font-semibold",children:x?`${x} min`:"None"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{className:"flex-1 rounded-md border p-2",placeholder:"minutes",value:h,onChange:a=>g(a.target.value)}),e.jsx(o.button,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:400},className:"px-3 py-2 rounded-md bg-primary text-white",onClick:j,children:"Set"})]}),e.jsxs("div",{className:"flex gap-2",children:[w?e.jsx(o.button,{whileHover:{scale:1.02},className:"flex-1 px-3 py-2 rounded-md bg-green-600 text-white",onClick:N,children:"Unblock"}):e.jsxs(o.button,{whileHover:{scale:1.02},className:"flex-1 px-3 py-2 rounded-md bg-red-600 text-white",onClick:v,children:[e.jsx(R,{className:"w-5 h-5 inline-block mr-2"}),"Block Now"]}),e.jsxs("a",{className:"px-3 py-2 rounded-md border text-sm text-gray-600 flex items-center gap-2",href:"options.html",target:"_blank",children:[e.jsx(p,{className:"w-4 h-4"}),"Settings"]})]})]})})}const b=document.getElementById("root");b&&k(b).render(S.createElement(C));
