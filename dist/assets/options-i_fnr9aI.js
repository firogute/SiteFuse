import{r as l,b as o,j as e,m as v,s as k,e as S,u as C,f as L,d as E}from"./motion-DyXh2Fmr.js";function R({title:t,titleId:n,...c},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},c),t?l.createElement("title",{id:n},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const B=l.forwardRef(R);function D(t){if(!t)return"0m 0s";const n=Math.floor(t/60),c=t%60;return`${n}m ${c}s`}function I(){const[t,n]=l.useState({limits:{},blocked:{},usage:{}}),[c,r]=l.useState(""),[d,u]=l.useState({}),[x,h]=l.useState(""),[p,g]=l.useState("");l.useEffect(()=>{(async()=>{const s=await o();n({limits:s.limits||{},blocked:s.blocked||{},usage:s.usage||{}})})()},[]);const b=l.useMemo(()=>{const s=new Set([...Object.keys(t.limits||{}),...Object.keys(t.blocked||{}),...Object.keys(t.usage||{})]);return Array.from(s).filter(a=>a.includes(c)).sort()},[t,c]);async function f(){const s=x.trim(),a=parseInt(p,10);if(!s||isNaN(a))return;await k(s,a);const i=await o();n({limits:i.limits||{},blocked:i.blocked||{},usage:i.usage||{}}),h(""),g("")}async function N(s){await S(s);const a=await o();n({limits:a.limits||{},blocked:a.blocked||{},usage:a.usage||{}})}async function w(s){!!t.blocked[s]?await C(s):await L(s);const i=await o();n({limits:i.limits||{},blocked:i.blocked||{},usage:i.usage||{}})}async function j(s){const a=Object.keys(d).filter(m=>d[m]);for(const m of a)await k(m,s);const i=await o();n({limits:i.limits||{},blocked:i.blocked||{},usage:i.usage||{}})}return e.jsx("div",{className:"p-6 w-full font-sans",children:e.jsxs(v.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"SiteFuse — Domains"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage tracked domains and limits"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{placeholder:"Search domains",className:"p-2 rounded border",value:c,onChange:s=>r(s.target.value)}),e.jsx("button",{className:"px-3 py-2 rounded border text-sm",onClick:()=>{u({}),r("")},children:"Reset"})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 gap-3 items-center",children:[e.jsx("input",{className:"col-span-2 p-2 rounded border",placeholder:"domain.com",value:x,onChange:s=>h(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 p-2 rounded border",placeholder:"minutes",value:p,onChange:s=>g(s.target.value)}),e.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white",onClick:f,children:"Add"})]})]}),e.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[e.jsx("button",{className:"px-3 py-2 rounded bg-indigo-500 text-white",onClick:()=>j(15),children:"Set 15m for selected"}),e.jsx("button",{className:"px-3 py-2 rounded bg-indigo-500 text-white",onClick:()=>j(30),children:"Set 30m for selected"})]}),e.jsx("div",{className:"overflow-auto max-h-[60vh]",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm text-gray-500",children:[e.jsx("th",{className:"py-2 w-8"}),e.jsx("th",{className:"py-2",children:"Domain"}),e.jsx("th",{className:"py-2",children:"Usage"}),e.jsx("th",{className:"py-2",children:"Limit"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[b.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-4",colSpan:"5",children:"No domains tracked yet."})}),b.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 align-top",children:e.jsx("input",{type:"checkbox",checked:!!d[s],onChange:a=>u(i=>({...i,[s]:a.target.checked})),"aria-label":`Select ${s}`})}),e.jsx("td",{className:"py-2 align-top",children:s}),e.jsx("td",{className:"py-2 align-top",children:D(t.usage[s])}),e.jsx("td",{className:"py-2 align-top",children:t.limits[s]?`${t.limits[s]} min`:"—"}),e.jsxs("td",{className:"py-2 align-top",children:[e.jsxs("button",{className:"mr-2 px-2 py-1 rounded border text-sm",onClick:()=>N(s),"aria-label":`Remove limit for ${s}`,children:[e.jsx(B,{className:"w-4 h-4 inline-block"})," Remove"]}),e.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>w(s),children:t.blocked[s]?"Unblock":"Block"})]})]},s))]})]})})]})})}const y=document.getElementById("root");y&&E(y).render(e.jsx(I,{}));
